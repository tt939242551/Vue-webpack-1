{"version":3,"sources":["webpack:///./src/modules/js/mixin.js","webpack:///./src/pages/cart/cart.js"],"names":["mixin","filters","Price","a","arr","split","length","concat","Object","defineProperty","__webpack_exports__","value","__WEBPACK_IMPORTED_MODULE_0__modules_js_mixin__","__webpack_require__","__WEBPACK_IMPORTED_MODULE_1__cart_base_css__","__WEBPACK_IMPORTED_MODULE_2__cart_trade_css__","n","__WEBPACK_IMPORTED_MODULE_3__cart_css__","__WEBPACK_IMPORTED_MODULE_4_vue__","__WEBPACK_IMPORTED_MODULE_5_axios__","__WEBPACK_IMPORTED_MODULE_5_axios___default","__WEBPACK_IMPORTED_MODULE_6_velocity_animate__","__WEBPACK_IMPORTED_MODULE_6_velocity_animate___default","Vue","el","data","lists","allSel","total","editingShop","removePop","removeData","computed","selLists","this","forEach","shop","goodsList","goods","checked","push","price","number","methods","getLists","_this","axios","get","then","rep","cartList","element","editing","msg","ele","catch","err","console","log","changeCheck","e","every","elem","changeShop","checkAll","_this2","edit","index","item","i","minus","list","post","id","plus","remove","removeConfirm","_this3","_removeData","splice","confirm","start","startX","changedTouches","clientX","end","_this4","endX","left","setTimeout","Velocity","$refs","created","mixins"],"mappings":"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","file":"static/js/cart.04a9eace7708084dda29.js","sourcesContent":["let mixin = {\r\n  filters:{\r\n    Price(a){\r\n      a = a + ''\r\n      let arr = a.split(\".\")\r\n      if (!arr[1]) {\r\n        return a.concat(\".00\")\r\n      } else if (arr[1].length===1) {\r\n        return a.concat(\"0\")\r\n      } else  {\r\n        return a\r\n      }  \r\n    }\r\n  }\r\n}\r\nexport default mixin\n\n\n// WEBPACK FOOTER //\n// ./src/modules/js/mixin.js","import mixin from '../../modules/js/mixin'\r\nimport './cart_base.css'\r\nimport './cart_trade.css'\r\nimport './cart.css'\r\nimport Vue from 'vue'\r\nimport axios from 'axios'\r\nimport Velocity from 'velocity-animate'\r\n\r\nnew Vue({\r\n  el: '.container',\r\n  data:{\r\n    lists: null,\r\n    allSel: false,\r\n    total: 0,\r\n    editingShop: null,\r\n    removePop: false,\r\n    removeData : null\r\n  },\r\n  computed:{\r\n    selLists(){\r\n      if(this.lists&&this.lists.length){\r\n        let arr = []\r\n        let total = 0\r\n        this.lists.forEach(shop=>{\r\n          shop.goodsList.forEach(goods=>{\r\n            if(goods.checked){\r\n              arr.push(goods)\r\n              total += goods.price * goods.number\r\n            }\r\n          })\r\n        })\r\n        this.total = total\r\n        return arr\r\n      }\r\n      return []\r\n    }\r\n  },\r\n  methods: { \r\n    getLists(){\r\n      axios.get('http://rap2api.taobao.org/app/mock/7058/cart/list')\r\n        .then(rep =>{  \r\n            let lists = rep.data.cartList;\r\n            lists.forEach(element => {\r\n              element.editing = false\r\n              element.msg = '编辑'\r\n              element.goodsList.forEach(ele=>{\r\n                ele.checked = false\r\n              })\r\n            })\r\n            this.lists = lists\r\n         })\r\n        .catch(err=>{\r\n          console.log(err)\r\n        })    \r\n    },\r\n    changeCheck(shop,e){\r\n      if(this.editingShop){return}\r\n      e.checked = !e.checked\r\n      shop.checked = shop.goodsList.every(function(elem){\r\n        return elem.checked;\r\n      })\r\n      this.allSel = this.lists.every(shop=>{\r\n        return shop.checked\r\n      })\r\n    },\r\n    changeShop(shop){\r\n    if(this.editingShop){return}\r\n    shop.checked = !shop.checked\r\n    shop.goodsList.forEach(ele=>{\r\n      ele.checked = shop.checked\r\n    })\r\n    this.allSel = this.lists.every(shop=>{\r\n      return shop.checked\r\n    })\r\n    },\r\n    checkAll(){\r\n      if(this.editingShop){return}\r\n      this.allSel = !this.allSel\r\n      this.lists.forEach(shop => {\r\n        shop.checked = this.allSel\r\n        shop.goodsList.forEach(ele=>{\r\n          ele.checked = this.allSel\r\n        })\r\n      })\r\n    },\r\n    edit(shop,index){\r\n      shop.editing = !shop.editing\r\n      shop.msg = shop.editing? '完成' : '编辑'\r\n      this.lists.forEach((item,i)=>{\r\n        if(index !==i ){\r\n          item.editing = false\r\n          item.msg = shop.editing? '' : '编辑'\r\n        }\r\n      })\r\n      this.editingShop = shop.editing\r\n    },\r\n    minus(list){\r\n      if(list.number===1){return}\r\n      axios.post('http://rap2api.taobao.org/app/mock/7058/cart/reduce',{id:list.id,number:1})\r\n      .then(rep=>{\r\n        list.number --\r\n      })\r\n    },\r\n    plus(list){\r\n      axios.post('http://rap2api.taobao.org/app/mock/7058/cart/add',{id:list.id,number:1})\r\n      .then(rep=>{\r\n        list.number ++\r\n      })\r\n    },\r\n    remove(shop,index,list,i){\r\n      this.removePop = true\r\n      this.removeData = {shop,index,list,i}    \r\n    },\r\n    removeConfirm(){\r\n    let {shop,index,list,i} = this.removeData\r\n    axios.post('http://rap2api.taobao.org/app/mock/7058/cart/remove',{id:list.id})\r\n    .then(rep=>{\r\n      shop.goodsList.splice(i,1)\r\n      if(!shop.goodsList.length){\r\n        this.lists.splice(index,1)\r\n      }\r\n      this.removePop = false\r\n      this.editingShop = null\r\n      this.lists.forEach(item=>{\r\n          item.editing = false\r\n          item.msg = '编辑'\r\n        \r\n      })\r\n    })\r\n    },\r\n    confirm(){\r\n      this.removePop = false\r\n    },\r\n    start(e,list){\r\n      list.startX = e.changedTouches[0].clientX\r\n    },\r\n    end(e,list){\r\n      let endX = e.changedTouches[0].clientX\r\n      let left = '0'\r\n      if(list.startX - endX > 80){\r\n        left = '-64px'\r\n      }\r\n      if(endX - list.startX > 80){\r\n        left = '0px'\r\n      }\r\n      setTimeout(()=>{\r\n        left = '0px'\r\n        Velocity(this.$refs[list.id],{\r\n          left:left\r\n        })\r\n      },2600)\r\n      Velocity(this.$refs[list.id],{\r\n        left:left\r\n      })\r\n    }\r\n  },\r\n  created() {\r\n    this.getLists()\r\n  },\r\n  mixins: [mixin]\r\n})\n\n\n// WEBPACK FOOTER //\n// ./src/pages/cart/cart.js"],"sourceRoot":""}